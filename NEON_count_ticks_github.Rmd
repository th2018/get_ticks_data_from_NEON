---
title: "merge_NEON_tick"
author: "Tao Huang"
date: "October 8, 2019"
output: html_document
---

#SELECT FILES WITH "FIELDDATA" IN THEIR NAMES; SELECT FILES WITH "taxonomyProcessed" IN THEIR NAMES
```{r}
files<-list.files("C:/Users/huangt/Downloads/NEON_count-ticks/output")
files<-as.data.frame(files)

fielddata<-files[grepl("fielddata",files$files),]
dim(files)
length(fielddata)

#taxonomyProcessed
taxonomyProcessed<-files[grepl("taxonomyProcessed",files$files),]
length(taxonomyProcessed)

```

#MERGE DATA FRAMES of taxonomyProcessed
```{r}
setwd("C:/Users/huangt/Downloads/NEON_count-ticks/output")
q1<-as.character(taxonomyProcessed[1])
q1<-read.csv(q1)
df1<-q1

length(taxonomyProcessed)

for (q1 in taxonomyProcessed[2:length(taxonomyProcessed)])
{
  q1<-read.csv(q1)

  df1<-do.call("rbind", list(df1,q1))

}
  head(df1)
```


#MERGE DATA FRAMES OF fielddata
```{r}
setwd("C:/Users/huangt/Downloads/NEON_count-ticks/output")
q<-as.character(fielddata[1])
q<-read.csv(q)


df<-q



length(fielddata)

for (q in fielddata[2:1035])
{
  q<-read.csv(q)

  
  df<-do.call("rbind", list(df,q))

}
  df$decimalLongitude<-as.numeric(df$decimalLongitude
)
df$decimalLatitude<-as.numeric(df$decimalLatitude)
df$elevation<-as.numeric(df$elevation)
df$totalSampledArea<-as.numeric(df$totalSampledArea)
```

```{r}
df_df1<-merge(df,df1,by= "sampleID")
dim(df_df1)
head(df_df1)

```

```{r}
derm<-df_df1[df_df1$genus=="Dermacentor",]
derm<-derm[,c("collectDate.y","individualCount","totalSampledArea"      ,"targetTaxaPresent","adultCount","nymphCount"            ,"larvaCount", "decimalLatitude"              ,"decimalLongitude"             ,"elevation","nlcdClass")]
write.csv(derm,file="C:/Users/huangt/Documents/neon_Dermacentor.csv")
derm$density<-derm$individualCount/derm$totalSampledArea
derm<-derm[!is.na(derm$density),] 
```


#load library
```{r}
library(raster)
library(sp)
library(rgdal)
library("foreign")
library("ggplot2")
require("maptools")
require("plyr")
```

```{r}


loc_shp <- SpatialPointsDataFrame(derm[,c("decimalLongitude","decimalLatitude"              )],
                    derm
                    )   

plot(loc_shp)
```


